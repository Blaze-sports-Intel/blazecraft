var p="blazecraft_academy_state",g=new Intl.DateTimeFormat("en-CA",{timeZone:"America/Chicago",year:"numeric",month:"2-digit",day:"2-digit"}),R=new Intl.DateTimeFormat("en-US",{timeZone:"America/Chicago",month:"short",day:"2-digit",hour:"numeric",minute:"2-digit",hour12:!0}),E={completedStepIds:[],activityDates:[],focusMinutes:0,shipWins:0},u=[{id:"select-squad",title:"Select your squad",description:"Drag-select units on the map to build a focused task group.",reward:"+10 Momentum",category:"command"},{id:"issue-orders",title:"Issue a command",description:"Use the 3x3 command grid to stop, hold, or resume work.",reward:"+15 Momentum",category:"command"},{id:"review-ops",title:"Review the Ops feed",description:"Scan live events to spot blockers and opportunities.",reward:"+10 Clarity",category:"review"},{id:"launch-job",title:"Launch a job",description:"Create a new job to keep agents moving in parallel.",reward:"+20 Velocity",category:"ship"},{id:"ship-win",title:"Ship a win",description:"Close one measurable outcome (launch, fix, or revenue save).",reward:"+25 Profit",category:"ship"}],S=e=>g.format(e),h=e=>R.format(e),d=e=>{if(!e)return{...E};let s=Array.isArray(e.completedStepIds)?e.completedStepIds.filter(a=>typeof a=="string"):[],c=Array.isArray(e.activityDates)?e.activityDates.filter(a=>typeof a=="string"):[];return{completedStepIds:Array.from(new Set(s)),activityDates:Array.from(new Set(c)),focusMinutes:Number.isFinite(e.focusMinutes)?Math.max(0,e.focusMinutes??0):0,shipWins:Number.isFinite(e.shipWins)?Math.max(0,e.shipWins??0):0}},f=(e,s)=>{let c=e.length,a=e.filter(r=>s.has(r.id)).length,o=c===0?0:Math.round(a/c*100);return{total:c,completed:a,percent:o}},v=(e,s)=>{if(!e.length)return 0;let c=Array.from(new Set(e)).sort(),a=0,o=s;for(let r=c.length-1;r>=0;r-=1){let n=c[r];if(n===o)a+=1,o=I(o,-1);else{if(n<o)continue;break}}return a},I=(e,s)=>{let[c,a,o]=e.split("-").map(n=>Number(n)),r=new Date(Date.UTC(c,a-1,o,12));return r.setUTCDate(r.getUTCDate()+s),g.format(r)},k=(e,s)=>{let a=[1,3,Math.max(4,Math.ceil(s*.6)),s].find(n=>n>e)??s,o=Math.max(a-e,0),r=o===0?"All milestones cleared":`Next milestone in ${o} step${o===1?"":"s"}`;return{target:a,remaining:o,label:r}},l=(e,s)=>Array.from(new Set([...e,s])).slice(-30);var D=window.React,w=window.ReactDOM;if(!D||!w)throw new Error("React runtime not found. Ensure React and ReactDOM are loaded before academy bundle.");var{createElement:t,useMemo:m,useState:$}=D,P=()=>{try{let e=localStorage.getItem(p);return e?d(JSON.parse(e)):d(null)}catch{return d(null)}},W=e=>{localStorage.setItem(p,JSON.stringify(e))},_=({step:e,isComplete:s,onToggle:c})=>t("div",{className:`academy-step ${s?"is-complete":""}`},t("div",{className:"academy-step-header"},[t("div",{className:"academy-step-title",key:`${e.id}-title`},e.title),t("span",{className:`academy-step-tag tag-${e.category}`,key:`${e.id}-tag`},e.category.toUpperCase())]),t("p",{className:"academy-step-desc"},e.description),t("div",{className:"academy-step-footer"},[t("span",{className:"academy-step-reward",key:`${e.id}-reward`},e.reward),t("button",{className:"academy-step-toggle",type:"button",onClick:c,"aria-pressed":s},s?"Completed":"Mark complete")])),F=()=>{let[e,s]=$(()=>P()),c=m(()=>new Set(e.completedStepIds),[e.completedStepIds]),a=m(()=>f(u,c),[c]),o=S(new Date),r=m(()=>v(e.activityDates,o),[e.activityDates,o]),n=m(()=>k(a.completed,a.total),[a]),b=m(()=>h(new Date),[]),y=i=>{s(i),W(i)},A=i=>{let M=c.has(i)?e.completedStepIds.filter(T=>T!==i):[...e.completedStepIds,i];y({...e,completedStepIds:M,activityDates:l(e.activityDates,o)})},x=()=>{y({...e,focusMinutes:e.focusMinutes+25,activityDates:l(e.activityDates,o)})},C=()=>{y({...e,shipWins:e.shipWins+1,activityDates:l(e.activityDates,o)})};return t("section",{className:"academy-panel-inner"},t("header",{className:"academy-header"},[t("div",{className:"academy-title-group",key:"academy-title"},[t("span",{className:"academy-kicker",key:"academy-kicker"},"BlazeCraft Academy"),t("h2",{className:"academy-title",key:"academy-title-text"},"Command Training + Profit Loop")]),t("div",{className:"academy-meta",key:"academy-meta"},[t("span",{className:"academy-meta-label",key:"academy-meta-label"},"Last pulse"),t("span",{className:"academy-meta-value",key:"academy-meta-value"},`${b} CT`)])]),t("div",{className:"academy-progress"},[t("div",{className:"academy-progress-bar",key:"academy-progress-bar"},[t("div",{className:"academy-progress-fill",style:{width:`${a.percent}%`}})]),t("div",{className:"academy-progress-meta",key:"academy-progress-meta"},[t("span",{className:"academy-progress-text",key:"academy-progress-text"},`${a.completed}/${a.total} steps complete`),t("span",{className:"academy-progress-milestone",key:"academy-progress-milestone"},n.label)])]),t("div",{className:"academy-grid"},[t("div",{className:"academy-steps",key:"academy-steps"},u.map(i=>t(_,{key:i.id,step:i,isComplete:c.has(i.id),onToggle:()=>A(i.id)}))),t("div",{className:"academy-side",key:"academy-side"},[t("div",{className:"academy-card",key:"academy-streak"},[t("h3",{className:"academy-card-title",key:"academy-streak-title"},"Momentum streak"),t("p",{className:"academy-card-value",key:"academy-streak-value"},`${r} day${r===1?"":"s"}`),t("p",{className:"academy-card-sub"},"Log one action every day to keep your command rhythm alive.")]),t("div",{className:"academy-card",key:"academy-focus"},[t("h3",{className:"academy-card-title",key:"academy-focus-title"},"Focus sprints"),t("p",{className:"academy-card-value",key:"academy-focus-value"},`${e.focusMinutes} minutes`),t("button",{className:"academy-action",type:"button",onClick:x},"Log 25-minute sprint"),t("p",{className:"academy-card-sub"},"Stack sprints to compound execution speed.")]),t("div",{className:"academy-card",key:"academy-profit"},[t("h3",{className:"academy-card-title",key:"academy-profit-title"},"Profit wins"),t("p",{className:"academy-card-value",key:"academy-profit-value"},`${e.shipWins} wins logged`),t("button",{className:"academy-action",type:"button",onClick:C},"Record a shipped win"),t("p",{className:"academy-card-sub"},"Celebrate launches, revenue saves, and momentum multipliers.")])])]))},N=document.getElementById("academyRoot");N&&w.createRoot(N).render(t(F));
